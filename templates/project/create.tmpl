{{template "base/head" .}}
<div class="repository new repo">
	<div class="ui middle very relaxed page grid">
		<div class="column">
			<form class="ui form" action="{{.Link}}" method="post">
				{{.CSRFTokenHTML}}
				<h3 class="ui top attached header">
					{{.i18n.Tr "new_project"}}
				</h3>
				<div class="ui attached segment">
					{{template "base/alert" .}}
					<div class="inline required field {{if .Err_Owner}}error{{end}}">
						<label>{{.i18n.Tr "project.owner"}}</label>
						<div class="ui selection owner dropdown">
							<input type="hidden" id="user_id" name="user_id" value="{{.ContextUser.ID}}" required>
							<span class="text">
								<img class="ui mini image" src="{{.ContextUser.RelAvatarLink}}">
								{{.ContextUser.ShortName 20}}
							</span>
							<i class="dropdown icon"></i>
							<div class="menu">
								<div class="item" data-value="{{.LoggedUser.ID}}">
									<img class="ui mini image" src="{{.LoggedUser.RelAvatarLink}}">
									{{.LoggedUser.ShortName 20}}
								</div>
								{{range .Orgs}}
									<div class="item" data-value="{{.ID}}">
										<img class="ui mini image" src="{{.RelAvatarLink}}">
										{{.ShortName 20}}
									</div>
								{{end}}
							</div>
						</div>
					</div>

					<div class="inline required field {{if .Err_RepoName}}error{{end}}">
						<label for="project_name">{{.i18n.Tr "project.name"}}</label>
						<input id="project_name" name="project_name" value="{{.project_name}}" autofocus required>
						<span class="help">{{.i18n.Tr "project.project_name_helper" | Safe}}</span>
					</div>
					<div class="inline field">
						<label>{{.i18n.Tr "project.visibility"}}</label>
						<div class="ui checkbox">
							{{if .IsForcedPrivate}}
								<input name="private" type="checkbox" checked readonly>
								<label>{{.i18n.Tr "project.visiblity_helper_forced" | Safe}}</label>
							{{else}}
								<input name="private" type="checkbox" {{if .private}}checked{{end}}>
								<label>{{.i18n.Tr "project.visiblity_helper" | Safe}}</label>
							{{end}}
						</div>
					</div>
					<div class="inline field {{if .Err_Description}}error{{end}}">
						<label for="description">{{.i18n.Tr "project.description"}}</label>
						<textarea id="description" name="description">{{.description}}</textarea>
					</div>

					<div class="ui divider"></div>

					<div class="inline field">
						<label>{{.i18n.Tr "project.parent"}}</label>
						<div class="ui search selection dropdown">
							<input type="hidden" name="license" value="{{.license}}">
							<div class="default text">{{.i18n.Tr "project.parent_helper"}}</div>
							<div class="menu">
								{{range .Projects}}
									<div class="item" data-value="{{.}}">{{.}}</div>
								{{end}}
							</div>
						</div>
					</div>

					<div class="inline field">
						<label>{{.i18n.Tr "project.team"}}</label>
						<div class="ui search normal selection dropdown">
							<input type="hidden" name="gitignores" value="{{.gitignores}}">
							<div class="default text">{{.i18n.Tr "project.team_helper"}}</div>
							<div class="menu">
								{{range .Teams}}
									<div class="item" data-value="{{.}}">{{.}}</div>
								{{end}}
							</div>
						</div>
					</div>

					<div class="inline field">
						<label>{{.i18n.Tr "project.repo"}}</label>
						<div class="ui search normal selection dropdown">
							<input type="hidden" name="gitignores" value="{{.gitignores}}">
							<div class="default text">{{.i18n.Tr "project.repo_helper"}}</div>
							<div class="menu">
								<div class="item" data-value="-1">None</div>
								{{range .Repos}}
									<div class="item" data-value="{{.ID}}">{{.Name}}</div>
								{{end}}
							</div>
						</div>
					</div>

					<div class="inline field">
						<label></label>
						<button class="ui green button">
							{{.i18n.Tr "project.create"}}
						</button>
						<a class="ui button" href="{{AppSubURL}}/">{{.i18n.Tr "cancel"}}</a>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
{{template "base/footer" .}}
